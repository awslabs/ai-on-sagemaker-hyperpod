"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3193],{2161:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"Tips/EKS/event-bridge","title":"Receive cluster status/health events","description":"Integration with Amazon EventBridge","source":"@site/docs/08-Tips/EKS/09-event-bridge.md","sourceDirName":"08-Tips/EKS","slug":"/Tips/EKS/event-bridge","permalink":"/docs/Tips/EKS/event-bridge","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"title":"Receive cluster status/health events","weight":49},"sidebar":"tutorialSidebar","previous":{"title":"Add users to your EKS HyperPod cluster","permalink":"/docs/Tips/EKS/add-users"},"next":{"title":"Containers","permalink":"/docs/Tips/Slurm/containers"}}');var s=i(4848),a=i(8453);const o={title:"Receive cluster status/health events",weight:49},r=void 0,d={},l=[{value:"Integration with Amazon EventBridge",id:"integration-with-amazon-eventbridge",level:2},{value:"Setup email notifications",id:"setup-email-notifications",level:2},{value:"1. Decide email addresses",id:"1-decide-email-addresses",level:4},{value:"2. Create and verify email identities in SES",id:"2-create-and-verify-email-identities-in-ses",level:4},{value:"3. Deploy the CloudFormation template",id:"3-deploy-the-cloudformation-template",level:4},{value:"4. Verify",id:"4-verify",level:4},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Next steps",id:"next-steps",level:2}];function c(e){const t={a:"a",h2:"h2",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"integration-with-amazon-eventbridge",children:"Integration with Amazon EventBridge"}),"\n",(0,s.jsxs)(t.p,{children:["SageMaker HyperPod delivers ",(0,s.jsx)(t.a,{href:"https://docs.aws.amazon.com/sagemaker/latest/dg/automating-sagemaker-with-eventbridge.html#eventbridge-hyperpod-node-health",children:"two types of notifications through Amazon EventBridge"}),":"]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Cluster status change events"}),"\n",(0,s.jsx)(t.li,{children:"Node health events"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"This guide provides instructions for setting up human-readable email notifications for these events using AWS Lambda and Amazon Simple Email Service (SES)."}),"\n",(0,s.jsx)(t.h2,{id:"setup-email-notifications",children:"Setup email notifications"}),"\n",(0,s.jsx)(t.h4,{id:"1-decide-email-addresses",children:"1. Decide email addresses"}),"\n",(0,s.jsx)(t.p,{children:"Firstly, determine the sender's email address and receiver's email address."}),"\n",(0,s.jsx)(t.h4,{id:"2-create-and-verify-email-identities-in-ses",children:"2. Create and verify email identities in SES"}),"\n",(0,s.jsxs)(t.p,{children:["Visit the ",(0,s.jsx)(t.a,{href:"https://console.aws.amazon.com/ses/home#/identities",children:"management console of Amazon SES"}),', create email identities (for both sender address and receiver address) from the "Create identity" button.']}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"SES Console",src:i(4264).A+"",width:"1798",height:"792"})}),"\n",(0,s.jsx)(t.p,{children:'A confirmation email will be sent to your email address. Click on the link to verify your email address and make sure your "Identity status" changes to "Verified".'}),"\n",(0,s.jsx)(t.h4,{id:"3-deploy-the-cloudformation-template",children:"3. Deploy the CloudFormation template"}),"\n",(0,s.jsx)(t.p,{children:"Click the button below to deploy the CloudFormation stack, which will install the EventBridge rule, Lambda function, and required IAM roles."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://console.aws.amazon.com/cloudformation/home?#/stacks/quickcreate?templateURL=https://ws-assets-prod-iad-r-iad-ed304a55c2ca1aee.s3.us-east-1.amazonaws.com/2433d39e-ccfe-4c00-9d3d-9917b729258e/hyperpod-event-bridge-email.yaml&stackName=hyperpod-event-bridge-email",children:"Deploy EventBridge Email Stack"})}),"\n",(0,s.jsx)(t.h4,{id:"4-verify",children:"4. Verify"}),"\n",(0,s.jsxs)(t.p,{children:["Verify that you can receive notification emails by changing the cluster status (e.g., scaling up/down).\nYou can also test node health notifications by triggering ",(0,s.jsx)(t.a,{href:"/docs/validation-and-testing/resiliency/eks-resiliency#1manual-replacement-or-reboot",children:"manuall instance replacement"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Node Health Email",src:i(6131).A+"",width:"1314",height:"840"})}),"\n",(0,s.jsx)(t.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(t.p,{children:"If you don't receive the email, please check whether it is being classified as spam, and monitor the graphs in the EventBridge console and Lambda console to see if any errors are occurring. If your Lambda function is failing, check CloudWatch Logs for the reason for the failure."}),"\n",(0,s.jsx)(t.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["You can customize the format of the emails by modifying the Lambda function. You can extract more information from ",(0,s.jsx)(t.a,{href:"https://docs.aws.amazon.com/sagemaker/latest/dg/automating-sagemaker-with-eventbridge.html#eventbridge-hyperpod-node-health",children:"the event JSON data"}),", or even by calling SageMaker AI service APIs."]}),"\n",(0,s.jsxs)(t.li,{children:["If you used Amazon SES for the first time, your SES account is most likely in the sandbox mode. Some restrictions are applied to the sandbox mode. See ",(0,s.jsx)(t.a,{href:"https://docs.aws.amazon.com/ses/latest/dg/request-production-access.html",children:"this document"})," to learn more about the sandbox mode, and how to moved out of the sandbox and into production."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},4264:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/ses-console-a1da22c971fdfb7981367bfe5df1b2ca.png"},6131:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/node-health-email-1da92ca0c04a8235253c91ece280a2c4.png"},8453:(e,t,i)=>{i.d(t,{R:()=>o,x:()=>r});var n=i(6540);const s={},a=n.createContext(s);function o(e){const t=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);