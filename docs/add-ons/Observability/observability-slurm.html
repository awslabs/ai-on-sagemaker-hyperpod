<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-add-ons/Observability/observability-slurm/observability-slurm" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Observability with AMP and AMG (Slurm only) | AI on Sagemaker Hyperpod</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://awslabs.github.io/img/header_background.png"><meta data-rh="true" name="twitter:image" content="https://awslabs.github.io/img/header_background.png"><meta data-rh="true" property="og:url" content="https://awslabs.github.io/docs/add-ons/Observability/observability-slurm"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="machine learning, generative ai, genai, sagemaker, hyperpod, sagemaker hyperpod,         model training, model inference, nemo framework, pytorch, pytorch framework"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Observability with AMP and AMG (Slurm only) | AI on Sagemaker Hyperpod"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/img/Amazon-Sagemaker-Icon.jpg"><link data-rh="true" rel="canonical" href="https://awslabs.github.io/docs/add-ons/Observability/observability-slurm"><link data-rh="true" rel="alternate" href="https://awslabs.github.io/docs/add-ons/Observability/observability-slurm" hreflang="en"><link data-rh="true" rel="alternate" href="https://awslabs.github.io/docs/add-ons/Observability/observability-slurm" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Add-Ons","item":"https://awslabs.github.io/docs/category/add-ons"},{"@type":"ListItem","position":2,"name":"Observability","item":"https://awslabs.github.io/docs/add-ons/Observability/"},{"@type":"ListItem","position":3,"name":"Observability with AMP and AMG (Slurm only)","item":"https://awslabs.github.io/docs/add-ons/Observability/observability-slurm/"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="AI on Sagemaker Hyperpod RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="AI on Sagemaker Hyperpod Atom Feed"><link rel="stylesheet" href="/assets/css/styles.acb24679.css">
<script src="/assets/js/runtime~main.f8a8153b.js" defer="defer"></script>
<script src="/assets/js/main.0aaff44d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="dark";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/Amazon-Sagemaker-Icon.jpg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Amazon-Sagemaker-Icon.jpg" alt="AI on Sagemaker Hyperpod" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/Amazon-Sagemaker-Icon.jpg" alt="AI on Sagemaker Hyperpod" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">AI on Sagemaker Hyperpod</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Orchestrated by EKS</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/getting-started/orchestrated-by-eks/initial-cluster-setup">Initial cluster setup</a></li><li><a class="dropdown__link" href="/docs/eks-blueprints/training/trainium/aws-trainium">AWS Trainium</a></li><li><a class="dropdown__link" href="/docs/eks-blueprints/training/ddp/distributed-data-parallel">Distributed Data Parallel</a></li><li><a class="dropdown__link" href="/docs/eks-blueprints/training/fsdp/fully-sharded-data-parallel">Fully Sharded Data Parallel</a></li><li><a class="dropdown__link" href="/docs/eks-blueprints/training/megatron-lm/megatron-lm-readme">NVIDIA Megatron LM</a></li><li><a class="dropdown__link" href="/docs/eks-blueprints/training/ray-train/ray-train-readme">Ray Train</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Orchestrated by SLURM</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/getting-started/orchestrated-by-slurm/initial-cluster-setup">Initial cluster setup</a></li><li><a class="dropdown__link" href="/docs/slurm-blueprints/training/trainium/Llama3-70B">AWS Trainium</a></li><li><a class="dropdown__link" href="/docs/slurm-blueprints/training/ddp/distributed-data-parallel">Distributed Data Parallel</a></li><li><a class="dropdown__link" href="/docs/slurm-blueprints/training/fsdp/fully-sharded-data-parallel">Fully Sharded Data Parallel</a></li><li><a class="dropdown__link" href="/docs/slurm-blueprints/training/megatron-lm/megatron-lm-readme">NVIDIA Megatron LM</a></li></ul></div><a class="navbar__item navbar__link" href="/resources">Useful links</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/awslabs/ai-on-sagemaker-hyperpod" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/getting-started">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/eks-blueprints">EKS Blueprints</a><button aria-label="Expand sidebar category &#x27;EKS Blueprints&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/slurm-blueprints">SLURM Blueprints</a><button aria-label="Expand sidebar category &#x27;SLURM Blueprints&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/sagemaker-hyperpod-recipes">Sagemaker Hyperpod Recipes</a><button aria-label="Expand sidebar category &#x27;Sagemaker Hyperpod Recipes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/add-ons">Add-Ons</a><button aria-label="Collapse sidebar category &#x27;Add-Ons&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/add-ons/Observability">Observability</a><button aria-label="Collapse sidebar category &#x27;Observability&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/add-ons/Observability/one-click-observability-eks">One-Click Observability with AMP and AMG (EKS only)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/add-ons/Observability/observability-slurm">Observability with AMP and AMG (Slurm only)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/add-ons/Observability/Container Insights">Amazon CloudWatch Container Insights (EKS only)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/add-ons/Observability/MLFlow">SageMaker Managed MLflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/add-ons/Observability/Weights and Biases">Weights &amp; Biases</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/task-governance">Task Governance</a><button aria-label="Expand sidebar category &#x27;Task Governance&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/add-ons/hp-training-operator/overview">HyperPod Training Operator</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/add-ons/installing-the-hyperpod-cli">Installing the Hyperpod CLI</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/integrations">Integrations</a><button aria-label="Expand sidebar category &#x27;Integrations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/add-ons/Utilities/FinOps">Utilities</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/validation-and-testing">Validation and Testing</a><button aria-label="Expand sidebar category &#x27;Validation and Testing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/infrastructure-as-a-code">Infrastructure as a Code</a><button aria-label="Expand sidebar category &#x27;Infrastructure as a Code&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/add-ons"><span>Add-Ons</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/add-ons/Observability"><span>Observability</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Observability with AMP and AMG (Slurm only)</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Observability with AMP and AMG (Slurm only)</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">‚Äã</a></h2>
<p>SageMaker HyperPod can optionally be integrated with <a href="https://docs.aws.amazon.com/prometheus/latest/userguide/what-is-Amazon-Managed-Service-Prometheus.html" target="_blank" rel="noopener noreferrer">Amazon Managed Prometheus</a> and <a href="https://docs.aws.amazon.com/grafana/latest/userguide/what-is-Amazon-Managed-Service-Grafana.html" target="_blank" rel="noopener noreferrer">Amazon Managed Grafana</a> to export metrics about your cluster and cluster-nodes to a Grafana dashboard.</p>
<p><img decoding="async" loading="lazy" alt="hyperpod observability architecture" src="/assets/images/observability_architecture-1f511d1934afb3d2ebf7c89c41a31a17.png" width="2122" height="1178" class="img_ev3q"></p>
<p>This solution uses CloudFormation to deploy workspaces for Amazon Managed Prometheus and Grafana, and Hyperpod Lifecycle Scripts to install metrics exporters and OpenTelemetry Collector (OTEL) to your cluster. Also, you can install the solution to existing clusters as well by running commands interactively on the head node (Ad-hoc installation).</p>
<p>Not all metrics are enabled by default or displayed in your Grafana workspace. Some metrics are categorized as <strong>Advanced metrics</strong>. Check the <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/hyperpod-observability-cluster-metrics.html" target="_blank" rel="noopener noreferrer">SageMaker HyperPod cluster metrics</a> page for more details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="two-deployment-options">Two Deployment Options<a href="#two-deployment-options" class="hash-link" aria-label="Direct link to Two Deployment Options" title="Direct link to Two Deployment Options">‚Äã</a></h2>
<p>There are two methods to deploy observability for SageMaker HyperPod:</p>
<ol>
<li><strong><a href="#method-1-amazon-managed-grafana--amazon-managed-prometheus">Amazon Managed Grafana (AMG) + Amazon Managed Prometheus (AMP)</a></strong> - Fully managed solution with IAM Identity Center authentication</li>
<li><strong><a href="#method-2-open-source-grafana--amazon-managed-prometheus">Open Source Grafana + Amazon Managed Prometheus</a></strong> - Self-managed Grafana you don&#x27;t have Identity Center access</li>
</ol>
<p>Choose the method that best fits your organization&#x27;s requirements and authentication setup.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="method-1-amazon-managed-grafana--amazon-managed-prometheus">Method 1: Amazon Managed Grafana + Amazon Managed Prometheus<a href="#method-1-amazon-managed-grafana--amazon-managed-prometheus" class="hash-link" aria-label="Direct link to Method 1: Amazon Managed Grafana + Amazon Managed Prometheus" title="Direct link to Method 1: Amazon Managed Grafana + Amazon Managed Prometheus">‚Äã</a></h2>
<p>This is the recommended approach for production environments with IAM Identity Center enabled.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup">Setup<a href="#setup" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">‚Äã</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-enable-iam-identity-center">1. Enable IAM Identity Center<a href="#1-enable-iam-identity-center" class="hash-link" aria-label="Direct link to 1. Enable IAM Identity Center" title="Direct link to 1. Enable IAM Identity Center">‚Äã</a></h3>
<p>As a prerequisite to deploying this stack, you will need to have IAM Identity Center enabled for your account or organization. Amazon Managed Grafana uses IAM Identity Center to authenticate users to your dashboards. You can do this through the <a href="https://console.aws.amazon.com/singlesignon" target="_blank" rel="noopener noreferrer">IAM Identity Center AWS Console</a>.</p>
<p><img decoding="async" loading="lazy" alt="Enable-IAM-Identity-Center" src="/assets/images/identity-center-enable-468ffab96b81787e22cb08061bbbbe50.png" width="1751" height="875" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-add-additional-permissions">2. Add additional permissions<a href="#2-add-additional-permissions" class="hash-link" aria-label="Direct link to 2. Add additional permissions" title="Direct link to 2. Add additional permissions">‚Äã</a></h3>
<p>Also, you need to add following additional permissions to the IAM role for HyperPod instance groups.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-a-managed-policy">2-a. Managed policy<a href="#2-a-managed-policy" class="hash-link" aria-label="Direct link to 2-a. Managed policy" title="Direct link to 2-a. Managed policy">‚Äã</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">AmazonPrometheusRemoteWriteAccess</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-b-inline-policy">2-b. Inline policy<a href="#2-b-inline-policy" class="hash-link" aria-label="Direct link to 2-b. Inline policy" title="Direct link to 2-b. Inline policy">‚Äã</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;Version&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2012-10-17&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;Statement&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;Sid&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;VisualEditor0&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Allow&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;Action&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ecr:BatchGetImage&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ecr:GetAuthorizationToken&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ecr:GetDownloadUrlForLayer&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-create-workspaces-for-prometheus-and-grafana">3. Create workspaces for Prometheus and Grafana<a href="#3-create-workspaces-for-prometheus-and-grafana" class="hash-link" aria-label="Direct link to 3. Create workspaces for Prometheus and Grafana" title="Direct link to 3. Create workspaces for Prometheus and Grafana">‚Äã</a></h3>
<p>Deploy the CloudFormation stack for your Amazon Managed Prometheus workspace and Amazon Managed Grafana workspace. It will automatically install pre-configured dashboards in your Grafana workspace. You can leave all parameters at their defaults.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>CloudFormation Template Available</div><div class="admonitionContent_BuS1"><p><strong>üìã CloudFormation Template</strong>: <a href="https://github.com/aws-samples/awsome-distributed-training/blob/main/4.validation_and_observability/4.prometheus-grafana/cluster-observability.yaml" target="_blank" rel="noopener noreferrer">cluster-observability.yaml</a></p><p>This template creates Amazon Managed Prometheus and Amazon Managed Grafana workspaces with pre-configured dashboards.</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>Make sure you deploy this stack in the region where your HyperPod cluster is located.</p></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>If you do not have Identity Center access, then please use <a href="#method-2-open-source-grafana--amazon-managed-prometheus">Method 2: Open Source Grafana + Amazon Managed Prometheus</a> below.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-add-users-to-the-grafana-workspace">4. Add users to the Grafana workspace<a href="#4-add-users-to-the-grafana-workspace" class="hash-link" aria-label="Direct link to 4. Add users to the Grafana workspace" title="Direct link to 4. Add users to the Grafana workspace">‚Äã</a></h3>
<p>From the <a href="https://console.aws.amazon.com/grafana/home#/workspaces" target="_blank" rel="noopener noreferrer">Management Console for Amazon Managed Grafana</a>, select the workspace you just created by the CloudFormation.</p>
<p>Select the <strong>Configure users and groups</strong> button and add your user.</p>
<p><img decoding="async" loading="lazy" alt="add-user-1" src="/assets/images/add-user-1-1485b57512efa7de784ea8eed43bb0f4.png" width="1540" height="430" class="img_ev3q"></p>
<p>From the <strong>Action</strong> menu, select <strong>Assign user</strong> and <strong>Make admin</strong> to configure users for who need access to the Grafana workspace.</p>
<p><img decoding="async" loading="lazy" alt="add-user-2" src="/assets/images/add-user-2-bb1e0ca6c527dbc2d5c86e6db8a3e6a5.png" width="1350" height="696" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-modify-the-lifecycle-scripts">5. Modify the lifecycle scripts<a href="#5-modify-the-lifecycle-scripts" class="hash-link" aria-label="Direct link to 5. Modify the lifecycle scripts" title="Direct link to 5. Modify the lifecycle scripts">‚Äã</a></h3>
<p>To install the metric exporters and OTEL collector on your cluster, edit the lifecycle scripts for the cluster by following these steps:</p>
<ol>
<li>
<p>Locate the Prometheus remote write URL in the <code>Outputs</code> tab of the CloudFormation stack you just deployed. You will use the URL to configure the lifecycle scripts.</p>
<p><img decoding="async" loading="lazy" alt="prometheus-remote-write-url" src="/assets/images/prometheus-remote-write-url-2daadd84257b9fdcc0c54d7d7a839a6c.png" width="1418" height="560" class="img_ev3q"></p>
</li>
<li>
<p>If you don&#x27;t have a copy of the lifecycle scripts locally, download them to your development machine so you can edit.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">aws s3 sync s3://{bucket-name}/ ./{local-working-directory}</span><br></span></code></pre></div></div>
</li>
<li>
<p>Open the <code>config.py</code> file with your text editor, and change the value <code>Config.enable_observability</code> to <code>True</code>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">Config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    enable_observability </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><br></span></code></pre></div></div>
</li>
<li>
<p>Change the parameters of <code>ObservabilityConfig</code>. Use the Prometheus remote write URL you located at the first step.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">ObservabilityConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># Prometheus remote write URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    prometheus_remote_write_url </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://aps-workspaces.us-west-2.amazonaws.com/workspaces/{your-workspace-id}/api/v1/remote_write&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># Set true if you want to collect advanced metrics</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    advanced_metrics </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">True</span><br></span></code></pre></div></div>
</li>
<li>
<p>Upload the lifecycle script to S3</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">aws s3 sync ./{local-working-directory} s3://{bucket-name}/</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Updating the lifecycle script is essential to ensure that metric exporters and OTEL collector are automatically configured on new cluster nodes during node replacement, scaling operations, and software updates.</p></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-install-observability-in-your-cluster">6. Install Observability in your cluster<a href="#6-install-observability-in-your-cluster" class="hash-link" aria-label="Direct link to 6. Install Observability in your cluster" title="Direct link to 6. Install Observability in your cluster">‚Äã</a></h3>
<p>There are two options for installing observabability on a your HyperPod cluster, depending on where you are creating a new cluster from now or installing the observability on an existing cluster.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="6-1-create-a-new-cluster">6-1. Create a new cluster<a href="#6-1-create-a-new-cluster" class="hash-link" aria-label="Direct link to 6-1. Create a new cluster" title="Direct link to 6-1. Create a new cluster">‚Äã</a></h4>
<p>If you are creating a new HyperPod cluster, use the lifecycle scripts you updated in the steps above. The lifecycle scripts will install necessary components (metrics exporters and OTEL collector) in your cluster.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="6-2-ad-hoc-installation">6-2. Ad-hoc installation<a href="#6-2-ad-hoc-installation" class="hash-link" aria-label="Direct link to 6-2. Ad-hoc installation" title="Direct link to 6-2. Ad-hoc installation">‚Äã</a></h4>
<p>You can also enable Observability for an existing cluster by following these steps.</p>
<ol>
<li>
<p>Login to the <strong>head node</strong> by SSM or SSH.</p>
</li>
<li>
<p>Set environment variables based on the number of worker nodes you have.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Number of worker nodes you have</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">export NUM_WORKERS=16</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Prometheus remote write URL you configured in the lifecycle script config.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">export PROMETHEUS_REMOTE_WRITE_URL=https://aps-workspaces.us-west-2.amazonaws.com/workspaces/{your-workspace-id}/api/v1/remote_write</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Set `--advanced` if you configured `advanced_metrics` to True in the lifecycle script config.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">export ARG_ADVANCED=--advanced</span><br></span></code></pre></div></div>
</li>
<li>
<p>Make sure the Linux user you are using has sudo priviledge on both head node and worker nodes.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo hostname</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">srun -N $NUM_WORKERS sudo hostname</span><br></span></code></pre></div></div>
</li>
<li>
<p>Clone the <code>https://github.com/aws-samples/awsome-distributed-training.git</code> repository under a shared file system.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mkdir ~/observability-setup</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd ~/observability-setup</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https://github.com/aws-samples/awsome-distributed-training.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd awsome-distributed-training/1.architectures/5.sagemaker-hyperpod/LifecycleScripts/base-config/observability</span><br></span></code></pre></div></div>
</li>
<li>
<p>Stop observability components if they are running already running</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo python3 stop_observability.py --node-type controller</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">srun -N $NUM_WORKERS sudo python3 stop_observability.py --node-type compute</span><br></span></code></pre></div></div>
</li>
<li>
<p>Install and run observability components</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo python3 install_observability.py --node-type controller --prometheus-remote-write-url $PROMETHEUS_REMOTE_WRITE_URL $ARG_ADVANCED</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">srun -N $NUM_WORKERS sudo python3 install_observability.py --node-type compute --prometheus-remote-write-url $PROMETHEUS_REMOTE_WRITE_URL $ARG_ADVANCED</span><br></span></code></pre></div></div>
</li>
<li>
<p>Verify status of containers and services</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl status slurm_exporter.service --no-pager -l</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker ps</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">srun -N $NUM_WORKERS docker ps</span><br></span></code></pre></div></div>
<p><strong>Example output</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">‚óè slurm_exporter.service - Prometheus SLURM Exporter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Loaded: loaded (/etc/systemd/system/slurm_exporter.service; enabled; vendor preset: enabled)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Active: active (running) since Thu 2025-09-11 04:27:30 UTC; 1 day 20h ago</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Main PID: 2408455 (slurm_exporter)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Tasks: 39 (limit: 152887)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Memory: 12.0M</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        CPU: 35min 28.668s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    CGroup: /system.slice/slurm_exporter.service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            ‚îî‚îÄ2408455 /usr/bin/slurm_exporter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Sep 11 04:27:30 ip-10-1-206-211 slurm_exporter[2408455]: time=2025-09-11T04:27:30.540Z level=INFO msg=&quot;Collector enabled&quot; collector=users</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Sep 11 04:27:30 ip-10-1-206-211 slurm_exporter[2408455]: time=2025-09-11T04:27:30.540Z level=INFO msg=&quot;Collector enabled&quot; collector=info</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Sep 11 04:27:30 ip-10-1-206-211 slurm_exporter[2408455]: time=2025-09-11T04:27:30.540Z level=INFO msg=&quot;Collector enabled&quot; collector=gpus</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Sep 11 04:27:30 ip-10-1-206-211 slurm_exporter[2408455]: time=2025-09-11T04:27:30.540Z level=INFO msg=&quot;Collector enabled&quot; collector=cpus</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Sep 11 04:27:30 ip-10-1-206-211 slurm_exporter[2408455]: time=2025-09-11T04:27:30.540Z level=INFO msg=&quot;Collector enabled&quot; collector=nodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Sep 11 04:27:30 ip-10-1-206-211 slurm_exporter[2408455]: time=2025-09-11T04:27:30.540Z level=INFO msg=&quot;Collector enabled&quot; collector=queue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Sep 11 04:27:30 ip-10-1-206-211 slurm_exporter[2408455]: time=2025-09-11T04:27:30.540Z level=INFO msg=&quot;Starting Slurm Exporter server...&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Sep 11 04:27:30 ip-10-1-206-211 slurm_exporter[2408455]: time=2025-09-11T04:27:30.540Z level=INFO msg=&quot;Command timeout configured&quot; timeout=5s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Sep 11 04:27:30 ip-10-1-206-211 slurm_exporter[2408455]: time=2025-09-11T04:27:30.540Z level=INFO msg=&quot;&quot; level=info msg=&quot;Listening on&quot; address=[::]:9341</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Sep 11 04:27:30 ip-10-1-206-211 slurm_exporter[2408455]: time=2025-09-11T04:27:30.541Z level=INFO msg=&quot;&quot; level=info msg=&quot;TLS is disabled.&quot; http2=false address=[::&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CONTAINER ID   IMAGE                                                                                 COMMAND                  CREATED        STATUS        PORTS     NAMES</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">da773247a262   602401143452.dkr.ecr.us-west-2.amazonaws.com/hyperpod/otel_collector:v1754424030352   &quot;/app/otelcollector ‚Ä¶&quot;   6 hours ago    Up 6 hours              otel-collector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">8c18b89cc1a3   602401143452.dkr.ecr.us-west-2.amazonaws.com/hyperpod/node_exporter:v1.9.1            &quot;/bin/node_exporter ‚Ä¶&quot;   45 hours ago   Up 45 hours             node-exporter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CONTAINER ID   IMAGE                                                                                  COMMAND                  CREATED        STATUS        PORTS     NAMES</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">eb4fa31d8b17   602401143452.dkr.ecr.us-west-2.amazonaws.com/hyperpod/otel_collector:v1754424030352    &quot;/app/otelcollector ‚Ä¶&quot;   45 hours ago   Up 45 hours             otel-collector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3ac63a09ba1f   602401143452.dkr.ecr.us-west-2.amazonaws.com/hyperpod/efa_exporter:1.0.0               &quot;./node_exporter --p‚Ä¶&quot;   45 hours ago   Up 45 hours             efa-exporter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">48396ed3e3ef   602401143452.dkr.ecr.us-west-2.amazonaws.com/hyperpod/dcgm_exporter:4.1.1-4.0.4-ubi9   &quot;/usr/local/dcgm/dcg‚Ä¶&quot;   45 hours ago   Up 45 hours             dcgm-exporter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">216eff1c9d55   602401143452.dkr.ecr.us-west-2.amazonaws.com/hyperpod/node_exporter:v1.9.1             &quot;/bin/node_exporter ‚Ä¶&quot;   45 hours ago   Up 45 hours             node-exporter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    :</span><br></span></code></pre></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-verification">7. Verification<a href="#7-verification" class="hash-link" aria-label="Direct link to 7. Verification" title="Direct link to 7. Verification">‚Äã</a></h3>
<p>From the <a href="https://console.aws.amazon.com/grafana/home#/workspaces" target="_blank" rel="noopener noreferrer">Management Console for Amazon Managed Grafana</a>, select the workspace URL to open the dashboards. When the Sign-in screen pops up, login as a user you assigned in the <strong>Add users to the Grafana workspace</strong> step above.</p>
<p><img decoding="async" loading="lazy" alt="sign-in" src="/assets/images/sign-in-9c7e0fe4a9f5db1b03d95a559c6d1c54.png" width="1314" height="918" class="img_ev3q"></p>
<p>From the left navigation pane, select <strong>Dashboards</strong>, and choose one of pre-configured dashboards. Following is a sample screenshot of the <strong>NVIDIA DCGM Exporter Dashboard</strong>.</p>
<p><img decoding="async" loading="lazy" alt="dcgm-dashboard" src="/assets/images/dcgm-dashboard-a0ad5168286d29492fd3bb404176de2e.png" width="2990" height="1426" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="method-2-open-source-grafana--amazon-managed-prometheus">Method 2: Open Source Grafana + Amazon Managed Prometheus<a href="#method-2-open-source-grafana--amazon-managed-prometheus" class="hash-link" aria-label="Direct link to Method 2: Open Source Grafana + Amazon Managed Prometheus" title="Direct link to Method 2: Open Source Grafana + Amazon Managed Prometheus">‚Äã</a></h2>
<p>This method is ideal for customers who don&#x27;t have access to IAM Identity Center or prefer a self-managed Grafana solution. It deploys a t2.micro EC2 instance running Open Source Grafana container along with Amazon Managed Service for Prometheus workspace.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Important</div><div class="admonitionContent_BuS1"><p>Open Source Grafana offers a self-managed and less secure alternative to Amazon Managed Grafana. This method OSS solution is not recommended for production deployments.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-1">Setup<a href="#setup-1" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-deploy-the-cloudformation-stack">1. Deploy the CloudFormation Stack<a href="#1-deploy-the-cloudformation-stack" class="hash-link" aria-label="Direct link to 1. Deploy the CloudFormation Stack" title="Direct link to 1. Deploy the CloudFormation Stack">‚Äã</a></h4>
<p>Deploy the CloudFormation stack for Open Source Grafana and Amazon Managed Prometheus workspace. This will create an EC2 instance running Grafana and the necessary Prometheus workspace.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>CloudFormation Template Available</div><div class="admonitionContent_BuS1"><p><strong>üìã CloudFormation Template</strong>: <a href="https://github.com/aws-samples/awsome-distributed-training/blob/main/4.validation_and_observability/4.prometheus-grafana/cluster-observability-os-grafana.yaml" target="_blank" rel="noopener noreferrer">cluster-observability-os-grafana.yaml</a></p><p>This template creates an EC2 instance with Open Source Grafana and Amazon Managed Prometheus workspace.</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>Make sure you deploy this stack in the region where your HyperPod cluster is located.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-access-open-source-grafana">2. Access Open Source Grafana<a href="#2-access-open-source-grafana" class="hash-link" aria-label="Direct link to 2. Access Open Source Grafana" title="Direct link to 2. Access Open Source Grafana">‚Äã</a></h4>
<p>Navigate to the <a href="https://console.aws.amazon.com/cloudformation/home" target="_blank" rel="noopener noreferrer">AWS CloudFormation Console</a> and fetch the <strong>GrafanaInstanceAddress</strong> output from the <code>OS-Observability</code> stack.</p>
<p><img decoding="async" loading="lazy" alt="CFN-Output" src="/assets/images/cfn-output-72eb9a65bfc852a1b47bbe2c1bf96724.png" width="2708" height="1334" class="img_ev3q"></p>
<p>Open the Grafana link in your browser:</p>
<p><img decoding="async" loading="lazy" alt="Grafana" src="/assets/images/grafana_home-c1d85e4a42e2605440ae10d0d5206add.png" width="2632" height="1440" class="img_ev3q"></p>
<p>The default Grafana login credentials are <code>admin/admin</code>. Please change the password after the first login.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-set-prometheus-workspace-as-data-source">3. Set Prometheus Workspace as Data Source<a href="#3-set-prometheus-workspace-as-data-source" class="hash-link" aria-label="Direct link to 3. Set Prometheus Workspace as Data Source" title="Direct link to 3. Set Prometheus Workspace as Data Source">‚Äã</a></h4>
<p>Next, you can connect the Prometheus workspace with the Grafana dashboard by setting workspace as a data source.</p>
<p>Navigate to &quot;Data Sources&quot; in Grafana and select &quot;Prometheus&quot;.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Don&#x27;t forget!</div><div class="admonitionContent_BuS1"><p>Don&#x27;t forget to remove the <code>/api/v1/query</code> part of the URL. The correct URL looks like this one:
<a href="https://aps-workspaces.us-west-2.amazonaws.com/workspaces/ws-123456-1234-1234-1234/" target="_blank" rel="noopener noreferrer">https://aps-workspaces.us-west-2.amazonaws.com/workspaces/ws-123456-1234-1234-1234/</a></p></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/os-grafana-set-datasource1-26336303a956831f1cc3094fae3fa39b.png" width="2850" height="1204" class="img_ev3q"></p>
<p>Set the &quot;Prometheus server URL&quot; with the value retrieved from the AWS console.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/retrieve-amp-endpoint-ae265456a2c4edea908c4bfbc2defacb.png" width="2538" height="934" class="img_ev3q">
<img decoding="async" loading="lazy" src="/assets/images/os-grafana-set-datasource2-728d3977aa6a15761029a9fee1ea9620.png" width="2108" height="860" class="img_ev3q"></p>
<p><strong>For authentication:</strong></p>
<ul>
<li>Choose &quot;<code>SigV4 auth</code>&quot;</li>
<li>Set &quot;Authentication Provider&quot; as &quot;<code>AWS SDK Default</code>&quot;</li>
<li>Set &quot;Default Region&quot; to the region where you deployed the CloudFormation stack.</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/os-grafana-set-datasource3-f99ddef45d706787497ecf9afac9ee66.png" width="1376" height="770" class="img_ev3q"></p>
<p>Once the datasource configuration test has passed, you can advance to the next step.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-configure-lifecycle-scripts-and-install-observability">4. Configure Lifecycle Scripts and Install Observability<a href="#4-configure-lifecycle-scripts-and-install-observability" class="hash-link" aria-label="Direct link to 4. Configure Lifecycle Scripts and Install Observability" title="Direct link to 4. Configure Lifecycle Scripts and Install Observability">‚Äã</a></h4>
<p>Follow the same steps as in Method 1 for:</p>
<ul>
<li><a href="#2-add-additional-permissions">Adding additional permissions</a></li>
<li><a href="#5-modify-the-lifecycle-scripts">Modifying the lifecycle scripts</a></li>
<li><a href="#6-install-observability-in-your-cluster">Installing Observability in your cluster</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="5-build-grafana-dashboards">5. Build Grafana Dashboards<a href="#5-build-grafana-dashboards" class="hash-link" aria-label="Direct link to 5. Build Grafana Dashboards" title="Direct link to 5. Build Grafana Dashboards">‚Äã</a></h4>
<p>Finally, with authentication and data sources setup, within your Grafana workspace, select dashboards &gt; new &gt; import.</p>
<p>To display metrics for the exporter services, you can start by configuring and customizing the following open source Grafana Dashboards by copying and pasting the below links:</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="slurm-exporter-dashboard">Slurm Exporter Dashboard:<a href="#slurm-exporter-dashboard" class="hash-link" aria-label="Direct link to Slurm Exporter Dashboard:" title="Direct link to Slurm Exporter Dashboard:">‚Äã</a></h5>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://grafana.com/grafana/dashboards/4323-slurm-dashboard/</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="slurm dashboard" src="/assets/images/slurm-dashboard-e4d5281a5bf099b3973fc059373875ab.png" width="2980" height="1138" class="img_ev3q"></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="node-exporter-dashboard">Node Exporter Dashboard:<a href="#node-exporter-dashboard" class="hash-link" aria-label="Direct link to Node Exporter Dashboard:" title="Direct link to Node Exporter Dashboard:">‚Äã</a></h5>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://grafana.com/grafana/dashboards/1860-node-exporter-full/</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="EFA Node dashboard" src="/assets/images/efa-node-dashboard-96e860c9d52647d62cfa7987a6c015be.png" width="2950" height="1538" class="img_ev3q"></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="dcgm-exporter-dashboard">DCGM Exporter Dashboard:<a href="#dcgm-exporter-dashboard" class="hash-link" aria-label="Direct link to DCGM Exporter Dashboard:" title="Direct link to DCGM Exporter Dashboard:">‚Äã</a></h5>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://grafana.com/grafana/dashboards/12239-nvidia-dcgm-exporter-dashboard/</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="DCGM Dashboard" src="/assets/images/dcgm-dashboard-a0ad5168286d29492fd3bb404176de2e.png" width="2990" height="1426" class="img_ev3q"></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="fsx-for-lustre-dashboard">FSx for Lustre Dashboard:<a href="#fsx-for-lustre-dashboard" class="hash-link" aria-label="Direct link to FSx for Lustre Dashboard:" title="Direct link to FSx for Lustre Dashboard:">‚Äã</a></h5>
<p>For the Amazon FSx for Lustre dashboard you need to create an additional data source for the Amazon CloudWatch.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://grafana.com/grafana/dashboards/20906-fsx/</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="FSxL Dashboard" src="/assets/images/fsxl-dashboard-ba62c1f69c279d8c506d2ff515bfe0ca.png" width="1348" height="823" class="img_ev3q"></p>
<p>Congratulations, you can now view real time metrics about your SageMaker HyperPod Cluster and compute nodes in Grafana!</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next steps" title="Direct link to Next steps">‚Äã</a></h2>
<ul>
<li>
<p>As needed, you can modify the pre-configured dashboards to meet your requirements. See the external <a href="https://grafana.com/docs/grafana-cloud/visualizations/dashboards/" target="_blank" rel="noopener noreferrer">Grafana document</a> for more details.</p>
</li>
<li>
<p><strong>For Amazon Managed Grafana users</strong>: Amazon Managed Grafana includes access to an updated alerting system that centralizes alerting information in a single, searchable view (in the navigation pane, choose Alerts to create an alert). Alerting is useful when you want to receive timely notifications, such as when GPU utilization drops unexpectedly, when a disk usage of your shared file system exceeds 90%, when multiple instances become unavailable at the same time, and so on. You can create alert rules based on metrics or queries and set up multiple notification channels, such as emails and Slack messages. For instructions on setting up alerts with Slack messages, see the <a href="https://github.com/aws-samples/awsome-distributed-training/blob/main/4.validation_and_observability/4.prometheus-grafana/README-grafana-alerts.md" target="_blank" rel="noopener noreferrer">Setting Up Slack Alerts for Amazon Managed Grafana</a> GitHub page.</p>
</li>
<li>
<p>The number of alerts is limited to 100 per Grafana workspace. If you need a more scalable solution, check out the <a href="https://docs.aws.amazon.com/prometheus/latest/userguide/AMP-Ruler.html" target="_blank" rel="noopener noreferrer">alerting options in Amazon Managed Service for Prometheus</a>.</p>
</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/add-ons/Observability/one-click-observability-eks"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">One-Click Observability with AMP and AMG (EKS only)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/add-ons/Observability/Container Insights"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Amazon CloudWatch Container Insights (EKS only)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#two-deployment-options" class="table-of-contents__link toc-highlight">Two Deployment Options</a></li><li><a href="#method-1-amazon-managed-grafana--amazon-managed-prometheus" class="table-of-contents__link toc-highlight">Method 1: Amazon Managed Grafana + Amazon Managed Prometheus</a><ul><li><a href="#setup" class="table-of-contents__link toc-highlight">Setup</a></li><li><a href="#1-enable-iam-identity-center" class="table-of-contents__link toc-highlight">1. Enable IAM Identity Center</a></li><li><a href="#2-add-additional-permissions" class="table-of-contents__link toc-highlight">2. Add additional permissions</a></li><li><a href="#3-create-workspaces-for-prometheus-and-grafana" class="table-of-contents__link toc-highlight">3. Create workspaces for Prometheus and Grafana</a></li><li><a href="#4-add-users-to-the-grafana-workspace" class="table-of-contents__link toc-highlight">4. Add users to the Grafana workspace</a></li><li><a href="#5-modify-the-lifecycle-scripts" class="table-of-contents__link toc-highlight">5. Modify the lifecycle scripts</a></li><li><a href="#6-install-observability-in-your-cluster" class="table-of-contents__link toc-highlight">6. Install Observability in your cluster</a></li><li><a href="#7-verification" class="table-of-contents__link toc-highlight">7. Verification</a></li></ul></li><li><a href="#method-2-open-source-grafana--amazon-managed-prometheus" class="table-of-contents__link toc-highlight">Method 2: Open Source Grafana + Amazon Managed Prometheus</a><ul><li><a href="#setup-1" class="table-of-contents__link toc-highlight">Setup</a></li></ul></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next steps</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/orchestrated-by-eks/initial-cluster-setup">Orchestrated by EKS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/orchestrated-by-slurm/initial-cluster-setup">Orchestrated by SLURM</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Sites with Sagemaker AI content</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/aws-samples/awsome-distributed-training" target="_blank" rel="noopener noreferrer" class="footer__link-item">Awsome Distributed Training<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/aws/sagemaker-hyperpod-recipes" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sagemaker Hyperpod Recipes<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Other AWS related sites</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://aws.training" target="_blank" rel="noopener noreferrer" class="footer__link-item">AWS Training &amp; Certification<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://aws.amazon.com/sagemaker/ai/hyperpod" target="_blank" rel="noopener noreferrer" class="footer__link-item">Amazon Sagemaker Hyperpod<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://repost.aws" target="_blank" rel="noopener noreferrer" class="footer__link-item">AWS re:Post<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2025 AWS WWSO ML Frameworks team. Built with ‚ù§Ô∏è at AWS.</div></div></div></footer></div>
</body>
</html>